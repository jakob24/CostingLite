<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:p="http://primefaces.org/ui"
    xmlns:c="http://java.sun.com/jsp/jstl/core">
                
<ui:composition template="layout.xhtml">
    <ui:define name="content">
    
			<h:outputScript target="body">
												
 				$(document).ready(function()
				{	
					PF('wizard').nextNav.hide();	
					
					//Enable Last pencil on Grid editor
					$('.ui-datatable-data tr').last().find('span.ui-icon-pencil').each(function(){$(this).click()});
					
					if(#{facesContext.validationFailed}) 
					{
						PF('wizard').nextNav.hide();
					}
					else if ($('.ui-datatable-data tr').length >1 )
					{
						PF('wizard').nextNav.show();
					}											  				  
				});					

                
				function blink() { 
				  $('#amendTool').fadeOut(500).fadeIn(500, blink); 
				}
				
				function showHideNextButton()
				{					
					if(#{facesContext.validationFailed}) 
					{
						PF('wizard').nextNav.hide();
					}
					else
					{
						PF('wizard').nextNav.show();
					}
				}
				
				function enableAddShipmentButton()
				{					
					$('#shipmentForm.addshipmentBtn').removeAttr('disabled');
				}
				
				function enableAddProductButton()
				{					
					$('#shipmentForm.addProductsBtn').removeAttr('disabled');
				}				
				
				function clickPencil()
				{
					$('.ui-datatable-data tr').last().find('span.ui-icon-pencil').each(function(){$(this).click()});
					$('.ui-datatable-even tr').last().find('span.ui-icon-pencil').each(function(){$(this).click()});
					$('.ui-datatable-odd tr').last().find('span.ui-icon-pencil').each(function(){$(this).click()});
				}			
					
			</h:outputScript>	
    
		<div class="container-fluid">
			<div class="ui-g-12 ui-md-4 ui-lg-8" id="dataEditDiv">				
				<h:form id="shipmentForm">         
				    <p:growl id="growl" sticky="true" showDetail="true"/>			 
				 	<p:importConstants type="com.artisans.inventory.controller.ShipmentWizard" var="WizardController"/>				 	
				    <p:wizard flowListener="#{ShipmentWizard.onFlowProcess}" widgetVar="wizard">
										 						 		
				 		<ui:include src="shipmentsTab.xhtml"/>					 					        				        
						<ui:include src="shipmentPaymentTab.xhtml"/>			        		        			        
				 						 		 	 
				        <p:tab id="confirmTab" title="Confirmation">
				            <p:panel header="Confirmation">
				                <h:panelGrid id="confirmation" columns="3" columnClasses="grid,grid,grid">
				                </h:panelGrid>				 
				                <p:commandButton value="Submit" action="#{ShipmentWizard.saveshipmentData}" update="growl" process="@this" oncomplete="enableAddProductButton();" ajax="true"/>
				                <p:spacer/>				                
				                <p:commandButton id="addProductsBtn" value="Add Products" action="shipmentProduct.xhtml" disabled="false"/>			                
				                
				            </p:panel>
				        </p:tab>
				    </p:wizard>
				 
				</h:form>
				
			    <div class="row">			      
					<p:messages id="messages" showDetail="true" autoUpdate="true"/>	
				</div>				
			</div>				
		</div>					
    </ui:define>
</ui:composition>

</html>